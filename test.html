<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Geolocation</title>
<style>html,body{height:100%;}body{padding:0;margin:0;}h1{padding:0;margin:0;font-size:50%;}</style>
</head>
<body>


<!-- MAP[START] -->
<h1>Geolocation</h1>
<div id="myMap" style='width:100%;height:97%;'></div>
<!-- MAP[END] -->


<script src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=[AmJSmi0DfSGMPQNbHQ7GSRPBRvWKZHpsv13mLTVUyr-EEQpqyk2I-d4tHVYiGw88]' async defer></script>
<script src="../js/BmapQuery.js"></script>
<script>
//****************************************************************************************
// BingMaps&BmapQuery
//****************************************************************************************
//Init
function GetMap(){
    //------------------------------------------------------------------------
    //1. Instance
    //------------------------------------------------------------------------
    const map = new Bmap("#myMap");

    //------------------------------------------------------------------------
    //2. geolocation: Display Map
    //------------------------------------------------------------------------
    map.geolocation(function(data) {
        //location
        const lat = data.coords.latitude;
        const lon = data.coords.longitude;
        //Map
        map.startMap(lat, lon, "load", 10);
        //pin
        map.pin(lat,lon,"#ff0000");
    });



    options[0]={
            "lat":<%=item[1].lat%>,
            "lon":<%=item[1].lon%>,
            "title":"<%=item[1].maptitle%>",
            "pinColor":"<%=item[1].pincolor%>",
            "height":300,
            "width":320,
            "description": '<a href="shop/<%=item[1].sid%>"><%=item[1].description%><br><img src="<%=item[1].image%>" width="300"></a>',
            "show":false
        };


}
</script>
</body>
</html>
